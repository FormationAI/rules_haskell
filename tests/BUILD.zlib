package(default_testonly = 1)

load("@io_tweag_rules_haskell//haskell:haskell.bzl",
  "haskell_library",
  "haskell_cc_import",
)

cc_library(
    name = "cbits",
    srcs = glob(["cbits/*.c"]),
    hdrs = glob(["cbits/*.h"]),
    strip_include_prefix = "cbits",
)

haskell_library(
  name = "zlib",
  srcs = glob([
    "Codec/Compression/*.hs",
    "Codec/Compression/Zlib/*.hs",
    "Codec/Compression/Zlib/*.hsc",
  ]),
  deps = [":cbits"],
  prebuilt_dependencies = [
    "base",
    "bytestring",
    "ghc-prim",
  ],
)
